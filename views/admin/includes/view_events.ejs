<div class="row">
    <div class="col-lg-12 content-header">
        <h1>Events</h1>
        <ol class="breadcrumb">
            <li><a href="/admin/"><i class="fa fa-fw fa-dashboard"></i> Dashboard </a></li>
            <li class="active">Events</li>
        </ol>
    </div>
</div>


<div class="row">
    <div class="col-lg-12">

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    <i class="fa fa-money"></i> View Events
                </h3>
            </div>

            <div class="panel-body">
            <% if (events != undefined && events.length <= 0) { %>
                <div class="row">
                    <div class="col-12">
                        <div class="text-danger text-center display-2">
                            No Events Available
                        </div>
                    </div>
                </div>
            <% } else { %>

                <div class="table-responsive">
                    <table class="table table-hover table-bordered table-striped">
                        <thead>
                            <tr>
                                <th>Id</th>
                                <th>Date</th>
                                <th>Event</th>
                                <th>Event Extras</th>
                                <th>Venue</th>
                                <th>Actions</th>
                            </tr>
                        </thead>


                        <tbody>
                        <% for (var i = 0; i < events.length; i ++) { %>

                            <tr>
                                <td>
                                    <%= i + 1  %>
                                </td>
                                <td class="pretty-date">
                                    <%= events[i].event_date %>
                                </td>
                                <td>
                                    <%= events[i].event_name %>
                                </td>
                                <td>
                                    <%= events[i].event_extras %>
                                </td>
                                <td>
                                    <%= events[i].event_venue %>
                                </td>
                                <td>
                                    <div class="btn-group">

                                        <a href="/admin/edit_event=<%= events[i].event_id;%>"
                                            class="btn btn-warning btn-sm"><i class="fa fa-pencil"></i>
                                        </a>
                                        <button class="btn btn-danger btn-sm btn_delete_event"
                                            event_id="<%= events[i].event_id; %>"><i class="fa fa-times"></i>
                                        </button>

                                    </div>
                                </td>
                            </tr>

                        <% } %>
                        </tbody>

                    </table>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
var dt = $(".pretty-date");
const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];


function prettyDate(date) {
if (date != "0000-00-00 00:00:00") {
var d = new Date(date);
var day = d.getDate();
var dayName = days[d.getDay()];
var month = monthNames[d.getMonth()];
var year = d.getFullYear();
var h = d.getHours()
var m = d.getMinutes();
var _time = (h > 12) ? (h - 12 + ':' + m + ' PM') : (h + ':' + m + ' AM');
var result = dayName + " " + day + " " + month + ", " + year + " " + _time;
return result
} else {
return "Never";
}
}


for (var t = 0; t < dt.length; t++) { var cur=prettyDate($(dt[t]).html().trim()); $(dt[t]).html(cur); } 
</script>